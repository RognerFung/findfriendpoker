# Finding-Friend-Poker
A five-player 'level-up' poker game. 五位玩家的升级扑克游戏.<br />

  use express as framework, node.js as back-end, use socket.io to achieve multi-player interaction.

游戏简介：<br />

    本游戏为5人升级游戏，出牌规则类似普通升级，同样有主牌，副牌，拖拉机，三张，'5'、'10'、'K'计分等等。本游戏的特色在于，每局游戏为2人对抗3人，庄家的同伴由叫牌和出牌决定，每局都可能不一样，游戏中需要猜测每位玩家是同伴还是敌人，增加了娱乐性。<br />

游戏规则：<br />

1、五位玩家按坐次顺序发牌，共三副牌162张。<br />
2、每局游戏有一位庄家，每人发31张牌后，庄家拿余下七张底牌。<br />
3、庄家从38张手牌中选出7张作为底牌扣下。<br />
4、庄家叫牌，出到这张叫牌的人将与庄家结为少数派一组，其余3位玩家为多数派一组。（例如庄家叫第一张红桃A，则打出第一张红桃A者跟庄家一组，对抗另外三人）<br />
5、每局游戏有一张关键主牌，与之同花色的或同数字的都为主牌，大小王皆为主牌。（例如主牌为黑桃2时，所有黑桃都是主牌，所有2都是主牌，大小王都是主牌）<br />
6、关键主牌的数字由庄家的级别决定。游戏开始所有玩家都是'2'级，关键主牌即为'2'。之后随玩家升级，关键主牌也随之变化。<br />
7、关键主牌的花色每局随机决定。可以是黑桃，红桃，梅花，方块或无主。无主情况下只有关键主牌数字相等的四张牌和大小王这一共六张牌是主牌。<br />
8、每局开始庄家先出牌，之后下家依次出牌。五人都出完一轮结束，比较出牌大小，胜者开启下一轮。每轮首位出牌人必须出同花色的牌，而后四位必须跟同样数量的牌。<br />
9、每轮首位出牌人的出牌花色称为本轮花色，后续玩家如果有此花色手牌则必须跟，否则可以跟其它花色牌。所有主牌失去其原先花色而同属于一个主牌花色。<br />
10、每轮首位出牌人出牌牌型称为本轮牌型，包括单张、一对、三张、拖拉机、三拖拉机或甩牌等。后续玩家如果跟相同花色牌，则必须同时跟相同牌型，除非手牌中没有相同牌型。<br />
11、本轮牌型为三拖拉机时，有三拖拉机则跟，否则有三张跟三张，否则有拖拉机的跟拖拉机，否则有一对跟一对。<br />
12、本轮牌型为拖拉机时，有拖拉机则跟，否则有两对跟两对，否则有一对跟一对。若有三拖拉机且无其它拖拉机，则可不拆散三拖拉机，只出其它牌即可。<br />
12、本轮牌型为三张时，有三张则跟，没有三张有一对跟一对。<br />
13、本轮牌型为一对时，有一对跟一对。若有三张且无其它一对，则可以不拆散三张，只出其它单牌即可。<br />
14、本轮牌型为甩牌时，首先检测后续四名玩家同花色手牌中是否存在大过甩牌中各牌型的牌。如果存在则甩牌失败，只留下较小的牌型，其它出牌挡回；否则甩牌成功。（例如出牌为红桃AKKJJJ，其它玩家的红桃手牌中如果没有大过A,或KK，或JJJ的，则甩牌成功，其它玩家需要跟六张牌）<br />
15、分数牌为'5'，'10'，'K'，其中'5'为5分，'10'和'K'为10分。每轮结束时，胜者获得该轮所有出牌所含分数。游戏需要尽可能多得分。<br />
16、庄家不计得分，庄家叫牌打出后，确定多数派和少数派，少数派不计得分，多数派得分合并称为游戏得分。<br />
17、全部31张牌打完，显示庄家所扣的七张底牌。如果最后一轮多数派赢，称为扣底成功。如果扣底成功且底牌含有分数，多数派可按照扣底牌型获得加倍的底牌分数。单牌乘2，对牌乘4，三张乘8，拖拉机乘16，三拖拉机乘32。如果最后一轮少数派赢，称为保底成功，底牌分数不计入游戏得分。<br />
18、全部牌打完且底牌分数核算后，游戏进行清算。游戏得分如果大于等于120，多数派胜利，庄家下台，其下家成为庄家；游戏得分小于120，少数派胜利，庄家继续坐庄。<br />
18、游戏得分为0：少数派完胜，升5级。游戏得分小于60：少数派大胜，升2级。游戏得分小于120：少数派胜，升1级。游戏得分小于180：多数派小胜，庄家下台，无人升级。游戏得分小于240：多数派胜利，升1级。游戏得分小于300：多数派大胜，升2级。以此类推游戏得分每增加60分，多数派多升一级。<br />
19、玩家等级为'5'、'10'、'J'、'K'、'A'时不可连升跳过。例如玩家等级为'9'时，不论得分应该升多少级，最多只能升为'10'级。<br />
20、玩家等级为'J'、'A'时只能自己坐庄时升级，'A'升级后回到等级'2'。<br />
21、关键主牌为J时，如果多数派扣底成功，且扣底最大牌是主花色的J或JJ或JJJ，称为主J扣底，此时庄家等级从'J'掉落回'2'，称为'被勾回去'。由于'J'需要自己坐庄胜利才能升级，且存在被打回原点的风险，因此坐庄打'J'成为本游戏最刺激的时刻。<br />

后续完善：<br />

1、游戏开始发牌时采用主动叫主而不是随机产生主牌花色。<br />
2、断线或计时器到0后自动打出最小牌。<br />
3、每盘结尾自动出牌。<br />
4、甩牌时跟牌存在bug待解决。<br />
5. pick-ally-card selects could use font-awesome suits.<br />
6. timer to zero then not really do anything. Need to automaticaly play the smallest suitable cards.<br />
7. create_select Sort method seems the same with function ssort(), need to make sure.<br />
8. create_select Tri_Double method, else if !This.Double() and !This.Triple() seems useless, need to make sure.<br />
9. create_select Patterns() doesn't actually do anything, perhaps use for simplify the validating, need to make sure.<br />
10. validate_select, if (RoundWin.Type() === 'tritractor'/'tractor'), now the rule is: if play tritractor/tractor, only have to follow a tritractor/tractor, don't have to follow the longest tritractor/tractor(less than play's). might need change, but the situation is quite rare.<br />