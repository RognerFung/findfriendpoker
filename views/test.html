<!Doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login Page</title>
<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="functions.js"></script>
<style>
canvas {
	position: absolute;
	text-align: center;
}
#cardArea {
	position: absolute;
	width: 1400px;
	top: 200px;
}
.markcard {
	position: absolute;
	left: 1340px;
}
</style>
</head>
<body>
<div id="table"></div>
<div id="seat1"></div>
<div id="seat2"></div>
<div id="cardArea"></div>
<script>
function draw_card(card, cardArea, cardClass) {
	var thecard = $('<canvas class="' + cardClass + '" value="' + card + '"></canvas>');
	thecard[0].width = 80;
	thecard[0].height = 120;
	$(cardArea).append(thecard);
	if (thecard[0].getContext) {
		var ctx = thecard[0].getContext('2d');
		ctx.fillStyle = 'white';
		ctx.fillRect(0, 0, 80, 120);
		ctx.beginPath();
		ctx.moveTo(4, 0);
		ctx.lineTo(76, 0);
		ctx.moveTo(80, 4);
		ctx.lineTo(80, 116);
		ctx.moveTo(76, 120);
		ctx.lineTo(4, 120);
		ctx.moveTo(0, 116);
		ctx.lineTo(0, 4);
		ctx.moveTo(76, 0);
		ctx.arc(76, 4, 4, - Math.PI / 2, 0, false);
		ctx.moveTo(80, 116);
		ctx.arc(76, 116, 4, 0, Math.PI / 2, false);
		ctx.moveTo(4, 120);
		ctx.arc(4, 116, 4, Math.PI / 2, Math.PI, false);
		ctx.moveTo(0, 4);
		ctx.arc(4, 4, 4, Math.PI, Math.PI * 3 / 2, false);
		ctx.closePath();
		ctx.stroke();	
		if (card === 'MF') {
			ctx.font = '15px Arial';
			ctx.fillStyle = 'black';
			ctx.fillText('J', 7, 14);
			ctx.fillText('O', 5, 26);
			ctx.fillText('K', 5, 38);
			ctx.fillText('E', 5, 50);
			ctx.fillText('R', 5, 62);
			ctx.beginPath();
			ctx.moveTo(40, 35);
			ctx.bezierCurveTo(36, 50, 36, 64, 20, 90);
			ctx.lineTo(60, 90);
			ctx.bezierCurveTo(44, 64, 44, 50, 40, 40);
			ctx.closePath();
			ctx.fill();
			ctx.arc(40, 35, 6, 0, 2 * Math.PI, false);
			ctx.fill();
		} else if (card === 'ME'){
			ctx.font = '15px Arial';
			ctx.fillStyle = 'red';
			ctx.fillText('J', 7, 14);
			ctx.fillText('O', 5, 26);
			ctx.fillText('K', 5, 38);
			ctx.fillText('E', 5, 50);
			ctx.fillText('R', 5, 62);
			ctx.beginPath();
			ctx.moveTo(40, 35);
			ctx.bezierCurveTo(36, 50, 36, 64, 20, 90);
			ctx.lineTo(60, 90);
			ctx.bezierCurveTo(44, 64, 44, 50, 40, 40);
			ctx.closePath();
			ctx.fill();
			ctx.arc(40, 35, 6, 0, 2 * Math.PI, false);
			ctx.fill();
		} else {
			if (card[0] === 'D') {
				ctx.fillStyle = 'red';
				ctx.beginPath();
				ctx.moveTo(40, 30);
				ctx.lineTo(20, 60);
				ctx.lineTo(40, 90);
				ctx.lineTo(60, 60);
				ctx.lineTo(40, 30);
				ctx.closePath();
				ctx.font = '30px Arial';
				if (card[1] === '0') {
					ctx.fillText('1', 0, 30);
					ctx.fillText('0', 13, 30);
				} else {
					ctx.fillText(card[1], 5, 30);
				}
				ctx.fill();
			} else if (card[0] === 'C') {
				ctx.fillStyle = 'black';
				ctx.beginPath();
				ctx.arc(40, 46, 12, 0, 2 * Math.PI, false);
				ctx.fill();
				ctx.beginPath();
				ctx.arc(52, 66, 12, 0, 2 * Math.PI, false);
				ctx.fill();
				ctx.beginPath();
				ctx.arc(28, 66, 12, 0, 2 * Math.PI, false);
				ctx.fill();
				ctx.beginPath();
				ctx.arc(40, 62, 6, 0, 2 * Math.PI, false);
				ctx.fill();
				ctx.moveTo(40, 66);
				ctx.quadraticCurveTo(40, 90, 30, 90);
				ctx.lineTo(50, 90);
				ctx.quadraticCurveTo(40, 90, 40, 64);
				ctx.closePath();
				ctx.font = '30px Arial';
				if (card[1] === '0') {
					ctx.fillText('1', 0, 30);
					ctx.fillText('0', 13, 30);
				} else {
					ctx.fillText(card[1], 5, 30);
				}
				ctx.fill();
			} else if (card[0] === 'H') {
				ctx.fillStyle = 'red';
				ctx.beginPath();
				ctx.moveTo(40, 48);
				ctx.bezierCurveTo(40, 30, 10, 30, 10, 48);
				ctx.bezierCurveTo(10, 69, 40, 69, 40, 90);
				ctx.bezierCurveTo(40, 69, 70, 69, 70, 48);
				ctx.bezierCurveTo(70, 30, 40, 30, 40, 48);
				ctx.font = '30px Arial';
				if (card[1] === '0') {
					ctx.fillText('1', 0, 30);
					ctx.fillText('0', 13, 30);
				} else {
					ctx.fillText(card[1], 5, 30);
				}
				ctx.fill();
			} else if (card[0] === 'S') {
				ctx.fillStyle = 'black';
				ctx.beginPath();
				ctx.moveTo(40, 30);
				ctx.bezierCurveTo(40, 51, 19, 51, 19, 72);
				ctx.bezierCurveTo(19, 84.6, 40, 84.6, 40, 72);
				ctx.bezierCurveTo(40, 84.6, 61, 84.6, 61, 72);
				ctx.bezierCurveTo(61, 51, 40, 51, 40, 30);
				ctx.closePath();
				ctx.fill();	
				ctx.beginPath();
				ctx.moveTo(40, 72);
				ctx.quadraticCurveTo(40, 90, 19, 90);
				ctx.lineTo(61, 90);
				ctx.quadraticCurveTo(40, 90, 40, 72);
				ctx.closePath();
				ctx.font = '30px Arial';
				if (card[1] === '0') {
					ctx.fillText('1', 0, 30);
					ctx.fillText('0', 13, 30);
				} else {
					ctx.fillText(card[1], 5, 30);
				}
				ctx.fill();
			}
		}
	}
}

function overlap (cardType) {
	var i = 0;
	var totalWidth = 1340;
	var cardWidth = 80;
	var cardNum = $(cardType).length;
	var theCardNum = 16;
	var width;
	var space;
	console.log(cardNum);
	if (cardNum > theCardNum) {
		width = cardWidth - (cardWidth * cardNum - totalWidth) / cardNum;
		space = 0;
	} else {
		width = 80;
		space = (totalWidth - cardWidth * cardNum) / 2;
	}
	console.log(width);
	$(cardType).each(function() {
		$(this).css({'left': (space + i * width) + 'px', 'z-index': i});
		i++;
	});
}

function draw_table() {
	var thetable = $('<canvas class="table"></canvas>');
	thetable[0].width = 100;
	thetable[0].height = 100;
	$('#table').append(thetable);
	if (thetable[0].getContext) {
		var ctx = thetable[0].getContext('2d');
		ctx.fillStyle = 'white';
		ctx.fillRect(0, 0, 100, 100);
		ctx.beginPath();
		ctx.arc(50, 50, 50, 0, 2 * Math.PI, false);
		ctx.closePath();
		ctx.fillStyle = 'maroon';
		ctx.fill();	
	}
}

function draw_seat() {
	var theseat = $('<canvas class="seat"></canvas>');
	theseat[0].width = 20;
	theseat[0].height = 20;
	$('#seat1').empty();
	$('#seat1').append(theseat);
	if (theseat[0].getContext) {
		var ctx = theseat[0].getContext('2d');
		ctx.fillStyle = 'orange';
		ctx.fillRect(0, 0, 20, 20);
	}
}

function draw_player() {
	var theplayer = $('<canvas class="player"></canvas>');
	theplayer[0].width = 20;
	theplayer[0].height = 20;
	$('#seat2').append(theplayer);
	if (theplayer[0].getContext) {
		var ctx = theplayer[0].getContext('2d');
		ctx.fillStyle = 'orange';
		ctx.fillRect(0, 0, 20, 20);
		ctx.beginPath();
		ctx.arc(10, 2, 2, 0, 2 * Math.PI, false);
		ctx.moveTo(10, 4);
		ctx.lineTo(5, 9);
		ctx.moveTo(10, 4);
		ctx.lineTo(15, 9);
		ctx.moveTo(10, 4);
		ctx.lineTo(10, 12);
		ctx.lineTo(5, 20);
		ctx.moveTo(10, 12);
		ctx.lineTo(15, 20);
		ctx.closePath();
		ctx.stroke();
	}
}
var Cards = setup_cards('D','9');
var dump = ['S0','S0','S0','SJ','SJ','SJ','SK','SK','SK','SA','SA','SA'];
var hold = ['S2','S2','S2','S3','S3','S3','S4','S5','S5','S5','S6','S6','S6','SJ','SJ','SJ'];
var play = ['S2','S2','S2','S3','S3','S3','S6','S6','S6','SJ','SJ','SJ'];
var judge = vali_dump(play, dump, dump, hold);
console.log(judge);

var cards = ['ME', 'MF', 'MF', 'S2', 'S2', 'SA', 'SK', 'H3', 'C0', 'C9', 'C8', 'C8', 'DJ', 'ME', 'MF', 'MF', 'S2', 'S2', 'SA', 'SK', 'H3', 'C0', 'C9', 'C8', 'C8', 'DJ', 'ME', 'MF', 'MF', 'S2', 'S2', 'SA', 'SK', 'H3', 'C0', 'C9', 'C8', 'C8', 'DJ'];
draw_table();
draw_seat();
draw_player();
cards.forEach(function(v) {
	draw_card(v, '#cardArea', 'card');	
});
overlap('.card');
$(document).on('click', 'canvas', function() {
	$(this).remove();
	overlap('.card');
});

//draw_card('SA', '#cardArea', 'markcard');
/*
#table {
	position: absolute;
	left: 800px;
}
#seat1 {
	position: absolute;
	left: 800px;
}
#seat2 {
	position: absolute;
	left: 800px;
}
*/
//gcloud app deploy --project findfriendpoker001
</script>


</body>
</html>